<!DOCTYPE html>
<html>
<head>
    <title>Upload to Azure Blob Storage with Fixed SAS</title>
</head>
<body>
    <h1>Select and Upload File to Azure Blob Storage</h1>
    <input type="file" id="fileInput" />
    <button onclick="uploadFile()">Upload</button>

    <script>
        // Replace with your fixed SAS URL pointing to the container (ensure trailing slash)
        const fixedSasUrl = 'https://managerfiles.blob.core.windows.net/uploads?sp=racwdli&st=2025-10-15T14:18:03Z&se=2025-10-18T22:33:03Z&sv=2024-11-04&sr=c&sig=X201W9W94a89Gnkgrb9TT2SEc00xtcWtUFfyIRlFSUw%3D';

        async function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput.files.length === 0) {
                alert('Please select a file first.');
                return;
            }
            const file = fileInput.files[0];

            // Construct full URL with filename appended to container SAS URL
            const uploadUrl = fixedSasUrl.endsWith('/') ? fixedSasUrl + encodeURIComponent(file.name) : fixedSasUrl + '/' + encodeURIComponent(file.name);

            const uploadResponse = await fetch(uploadUrl, {
                method: 'PUT',
                headers: {
                    'x-ms-blob-type': 'BlockBlob'
                },
                body: file
            });

            if (uploadResponse.ok) {
                alert('File uploaded successfully!');
            } else {
                alert('File upload failed.');
                console.error(await uploadResponse.text());
            }
        }
    </script>
</body>
</html>
